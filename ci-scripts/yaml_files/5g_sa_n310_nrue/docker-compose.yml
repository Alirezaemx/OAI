version: '3.8'
services:
    oai-nr-ue:
        image: oai-nr-ue:latest
        privileged: true
        network_mode: host
        container_name: oai-nr-ue
        #entrypoint: /bin/bash -c "sleep infinity"
        environment:
            TZ: Europe/Paris
            USE_VOLUMED_CONF: 'yes'
            USE_ADDITIONAL_OPTIONS: --usrp-args type=n3xx,name=ni-n3xx-31641B9,addr=192.168.20.2 -r 106 --numerology 1 --band 78 -C 3319680000 --sa --ue-fo-compensation --nokrnmod 1 --ue-txgain 12 --ue-rxgain 65
        volumes:
            - ../../conf_files/nrue.sa.oc.conf:/opt/oai-nr-ue/etc/nr-ue.conf
        healthcheck:
            test: /bin/bash -c "pgrep nr-uesoftmodem"
            interval: 10s
            timeout: 5s
            retries: 5
